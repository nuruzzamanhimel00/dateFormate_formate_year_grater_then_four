<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

  <script>
    var month = ["01","02","03","04","05","06","07","08","09","10","11","12"];
    $(document).ready(function() {
      $("#datepicker").datepicker({
        dateFormat: 'dd-mm-yy',
        yearRange: "c-100:c+10", // This sets the year range to current year - 100 to current year + 10
        changeYear: true // This enables the year dropdown in the datepicker
      });
      $("#datepicker1").datepicker({
        dateFormat: 'dd-mm-yy',
        yearRange: "c-100:c+10", // This sets the year range to current year - 100 to current year + 10
        changeYear: true // This enables the year dropdown in the datepicker
      });
    
      // Attach input event handler to validate date on manual input
      $("#datepicker").on('input', function() {
        var enteredDate = $(this).val();
        var parts = enteredDate.split('-');
        var year = parseInt(parts[2], 10);

        //JavaScript Date getFullYear()
        let d = new Date();
        let c_year = d.getFullYear();
        let c_month = d.getMonth();
        let c_day = d.getDay();
        parts[2] = c_year;
        parts[1] = month[c_month];
        parts[0] = c_day;
        if (isValidDate(enteredDate) == false) {
          // alert("Please enter a valid date with a four-digit year.");
          $(this).val(parts.join('-'));
        }
      });

      $("#datepicker1").on('input', function() {
        var enteredDate = $(this).val();
        var parts = enteredDate.split('-');
        var year = parseInt(parts[2], 10);

         //JavaScript Date getFullYear()
         let d = new Date();
        let c_year = d.getFullYear();
        let c_month = d.getMonth();
        let c_day = d.getDay();
        parts[2] = c_year;
        parts[1] = month[c_month];
        parts[0] = c_day;
        if (isValidDate(enteredDate) == false) {
          // alert("Please enter a valid date with a four-digit year.");
          $(this).val(parts.join('-'));
        }
      });
    
      function isValidDate(dateString) {
        // var dateRegex = /^\d{2}-\d{2}-\d{4}$/;
        // if (!dateRegex.test(dateString)) {
        //   return false;
        // }
    
        var parts = dateString.split('-');
        var year = parseInt(parts[2], 10);
        var month = parseInt(parts[1], 10);
        var day = parseInt(parts[0], 10);
        console.log('year',year.toString().length,year, day)
        if(year.toString().length > 4){
          return false;
        }
        if(!isNaN(month) && month.toString().length > 2){
          return false;
        }
        if(!isNaN(day) && day.toString().length > 2){
        
          return false;
        }
        if(day >31){
            return false;
          }
          if(month >12){
            return false;
          }
        // if (year < 1000 || year > 9999) {
        //   return false;
        // }
    
        return true;
      }
    });
    </script>
  <!-- <script>
    $(document).ready(function() {
      $("#datepicker").datepicker({
        dateFormat: 'dd-mm-yy',
        yearRange: "c-100:c+10", // This sets the year range to current year - 100 to current year + 10
        changeYear: true, // This enables the year dropdown in the datepicker
        onClose: function() {
          var enteredDate = $(this).val();
          if (!isValidDate(enteredDate)) {
            alert("Please enter a valid date with a four-digit year.");
            $(this).val('13-02-2024');
          }
        }
      });
      $("#datepicker1").datepicker({
        dateFormat: 'dd-mm-yy',
        yearRange: "c-100:c+10", // This sets the year range to current year - 100 to current year + 10
        changeYear: true, // This enables the year dropdown in the datepicker
        onSelect: function() {
          var enteredDate = $(this).val();
          if (!isValidDate(enteredDate)) {
            alert("Please enter a valid date with a four-digit year.");
            $(this).val('13-02-2024');
          }
        }
      });
    
      function isValidDate(dateString) {
        var dateRegex = /^\d{2}-\d{2}-\d{4}$/;
        if (!dateRegex.test(dateString)) {
          return false;
        }
    
        var parts = dateString.split('-');
        var year = parseInt(parts[2], 10);
        if (year < 1000 || year > 9999) {
          return false;
        }
    
        return true;
      }
    });
    </script> -->
</head>
<body>
 
<p>Date: <input type="text" id="datepicker" class="datepicker"></p>
<p>Date 1: <input type="text" id="datepicker1" class="datepicker"></p>
 
 
</body>
</html>